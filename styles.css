:root{
  --transition-fast: 160ms ease;
  --transition-med: 280ms ease;
  --radius: 16px;
  --shadow-soft: 0 18px 28px -12px rgba(22,34,60,0.45);
  --shadow-strong: 0 30px 60px -30px rgba(23,32,48,0.7);
  --font-base: 'Inter', ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
  --max-width: 760px;
  color-scheme: dark;
  --bg: #070d1a;
  --bg-soft: rgba(255,255,255,0.03);
  --bg-card: #0d1628;
  --bg-modal: rgba(13,22,40,0.86);
  --text-primary: #ecf1ff;
  --text-muted: #8fa2c0;
  --accent: #6ab8ff;
  --accent-strong: #2b8bff;
  --success: #4ee0a5;
  --outline: rgba(115,159,213,0.3);
  --outline-strong: rgba(115,159,213,0.5);
  --danger: #ff7d93;
  --glass: rgba(255,255,255,0.05);
  --gradient-bg: radial-gradient(1200px 450px at -10% -10%, rgba(94,172,255,0.25), transparent 55%), radial-gradient(900px 520px at 110% 10%, rgba(81,217,174,0.2), transparent 55%), linear-gradient(180deg, #060a16 0%, #04060d 45%, #0b1224 100%);
}

:root[data-theme="light"]{
  color-scheme: light;
  --bg: #f3f6fb;
  --bg-soft: rgba(15,44,89,0.06);
  --bg-card: #ffffff;
  --bg-modal: rgba(245,248,255,0.86);
  --text-primary: #132b4f;
  --text-muted: #516585;
  --accent: #2b8bff;
  --accent-strong: #1661ff;
  --success: #13b886;
  --outline: rgba(37,103,198,0.12);
  --outline-strong: rgba(37,103,198,0.3);
  --danger: #e04462;
  --glass: rgba(29,69,153,0.07);
  --gradient-bg: linear-gradient(160deg, #f7faff 0%, #eef2fb 60%, #dae2f6 100%);
}

*,
*::before,
*::after{box-sizing:border-box}

html,body{height:100%}
body{
  margin:0;
  font-family:var(--font-base);
  background:var(--gradient-bg);
  color:var(--text-primary);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:34px 18px;
  transition:background var(--transition-med), color var(--transition-med);
}

.container{
  width:100%;
  max-width:var(--max-width);
  background:var(--bg-card);
  border-radius:var(--radius);
  padding:32px clamp(20px,3vw,36px);
  box-shadow:var(--shadow-soft);
  position:relative;
  backdrop-filter:blur(22px);
  overflow:hidden;
  transition:background var(--transition-med), box-shadow var(--transition-med);
}

.container::after{
  content:'';
  position:absolute;
  inset:0;
  border-radius:inherit;
  border:1px solid var(--outline);
  pointer-events:none;
  transition:border var(--transition-med);
}

.topbar{
  display:grid;
  grid-template-columns:auto 1fr auto;
  align-items:center;
  margin-bottom:6px;
  gap:8px;
}

.topbar__spacer{width:32px;height:32px}

.brand{
  margin:0;
  font-size:1.9rem;
  letter-spacing:0.8px;
  text-align:center;
  font-weight:700;
  text-shadow:0 6px 18px rgba(0,0,0,0.12);
}

.theme-toggle{
  width:42px;
  height:42px;
  border-radius:50%;
  background:var(--glass);
  border:1px solid transparent;
  color:var(--accent);
  cursor:pointer;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:1.1rem;
  transition:transform var(--transition-fast), background var(--transition-fast), color var(--transition-fast), border var(--transition-fast);
}

.theme-toggle:hover{
  transform:translateY(-2px);
  border-color:var(--outline-strong);
  color:var(--accent-strong);
}

.subtitle{
  margin:0 0 20px 0;
  text-align:center;
  color:var(--text-muted);
  font-size:0.98rem;
}

.auth{
  display:flex;
  flex-direction:column;
  gap:10px;
  margin-bottom:16px;
  background:var(--bg-soft);
  padding:14px 16px;
  border-radius:12px;
  border:1px solid var(--outline);
  transition:background var(--transition-med), border var(--transition-med);
}

#authForm{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
}

#emailInput{
  flex:1;
  min-width:220px;
  padding:11px 14px;
  border-radius:12px;
  border:1px solid var(--outline);
  background:rgba(0,0,0,0.04);
  color:var(--text-primary);
  transition:border var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
}

#emailInput:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(106,184,255,0.25);
  outline:none;
  background:rgba(0,0,0,0.02);
}

#authSignedIn{
  display:flex;
  gap:8px;
  align-items:center;
  justify-content:space-between;
  flex-wrap:wrap;
}

#authMsg{
  margin-top:2px;
  color:var(--accent);
  min-height:18px;
}

.new-note{
  margin:4px 0 16px;
  display:flex;
  justify-content:flex-end;
}

.pill{
  border:none;
  border-radius:999px;
  padding:11px 22px;
  font-weight:600;
  font-size:0.95rem;
  cursor:pointer;
  transition:transform var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast), color var(--transition-fast), border var(--transition-fast);
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  text-decoration:none;
  letter-spacing:0.2px;
}

.pill:focus-visible{
  outline:3px solid rgba(255,255,255,0.4);
  outline-offset:3px;
}

.pill--accent{
  background:linear-gradient(135deg, var(--accent) 0%, var(--accent-strong) 100%);
  color:#031126;
  box-shadow:0 10px 25px -12px rgba(50,120,255,0.8);
}

.pill--accent:hover{
  transform:translateY(-2px);
  box-shadow:0 18px 35px -20px rgba(38,112,255,0.95);
}

.pill--outline{
  background:transparent;
  border:1px solid var(--outline);
  color:var(--text-muted);
}

.pill--outline:hover{
  border-color:var(--accent);
  color:var(--accent);
}

.pill--ghost{
  background:transparent;
  border:1px solid transparent;
  color:var(--text-muted);
}

.pill--ghost:hover{
  color:var(--text-primary);
  border-color:var(--outline);
}

.pill--success{
  background:linear-gradient(135deg, var(--success) 0%, rgba(15,215,152,0.85) 100%);
  color:#032516;
  box-shadow:0 16px 32px -20px rgba(20,189,135,0.8);
}

.list-wrap{
  min-height:220px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.note-list{
  list-style:none;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  gap:14px;
}

@keyframes fadeSlideIn{
  from{
    opacity:0;
    transform:translateY(16px) scale(0.98);
  }
  to{
    opacity:1;
    transform:translateY(0) scale(1);
  }
}

.note-item{
  display:grid;
  grid-template-columns:1fr auto;
  gap:14px;
  align-items:start;
  padding:18px 20px;
  border-radius:16px;
  border:1px solid var(--outline);
  background:linear-gradient(180deg, rgba(255,255,255,0.04) 0%, transparent 60%);
  box-shadow:0 15px 32px -22px rgba(25,38,66,0.65);
  transition:transform var(--transition-fast), box-shadow var(--transition-fast), border var(--transition-fast);
  animation:fadeSlideIn 220ms ease both;
}

.note-item:hover{
  transform:translateY(-4px);
  box-shadow:var(--shadow-strong);
  border-color:var(--outline-strong);
}

.note-title{
  margin:0 0 8px 0;
  font-size:1.18rem;
  font-weight:600;
  color:var(--text-primary);
  word-break:break-word;
  letter-spacing:0.2px;
}

.note-content{
  margin:0;
  font-size:1rem;
  line-height:1.55;
  white-space:pre-wrap;
  word-break:break-word;
  max-height:160px;
  overflow-y:auto;
  color:var(--text-muted);
  padding-right:6px;
}

.note-actions{
  display:flex;
  gap:10px;
  align-items:flex-start;
}

.icon-btn{
  background:var(--glass);
  border:1px solid transparent;
  color:var(--text-muted);
  cursor:pointer;
  padding:8px 10px;
  border-radius:12px;
  font-size:1rem;
  line-height:1;
  transition:transform var(--transition-fast), background var(--transition-fast), color var(--transition-fast), border var(--transition-fast);
}

.icon-btn:hover{
  background:rgba(255,255,255,0.08);
  color:var(--accent);
  transform:translateY(-1px);
  border-color:var(--outline);
}

.icon-btn--ghost{
  background:transparent;
  border:1px solid transparent;
  color:var(--text-muted);
  padding:6px;
  font-size:1.4rem;
}

.icon-btn--ghost:hover{
  color:var(--accent);
}

.danger{
  color:var(--danger);
}
.danger:hover{
  color:#fff;
  background:rgba(255,125,147,0.1);
}

.empty{
  color:var(--text-muted);
  padding:22px;
  text-align:center;
  border-radius:14px;
  background:var(--bg-soft);
  border:1px dashed var(--outline);
  transition:background var(--transition-med), border var(--transition-med);
}

.footer{
  margin-top:18px;
  text-align:center;
}
.footer-top{
  color:var(--text-muted);
  font-size:0.92rem;
}
.count{font-weight:600}

.modal{
  position:fixed;
  inset:0;
  display:none;
  align-items:center;
  justify-content:center;
  padding:24px;
  background:rgba(0,0,0,0.6);
  z-index:1000;
  animation:fadeSlideIn var(--transition-med);
}

.modal[open]{display:flex}

.modal__content{
  background:var(--bg-modal);
  border-radius:20px;
  padding:26px;
  width:min(560px, 95vw);
  box-shadow:var(--shadow-strong);
  border:1px solid var(--outline);
  backdrop-filter:blur(18px);
  transform:translateY(24px);
  opacity:0;
  animation:modalPop 220ms ease forwards;
  transition:background var(--transition-med), border var(--transition-med);
}

@keyframes modalPop{
  from{opacity:0;transform:translateY(28px) scale(0.96);}
  to{opacity:1;transform:translateY(0) scale(1);}
}

.modal__header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  margin-bottom:18px;
}
.modal__header h2{
  margin:0;
  font-size:1.24rem;
}

.modal__actions{
  margin-top:20px;
  display:flex;
  gap:12px;
  justify-content:flex-end;
}

.field{
  display:flex;
  flex-direction:column;
  gap:6px;
}

.field__label{
  font-size:0.85rem;
  text-transform:uppercase;
  letter-spacing:0.6px;
  color:var(--text-muted);
}

.field input,
.field textarea{
  border-radius:14px;
  border:1px solid var(--outline);
  padding:12px 14px;
  font-size:1rem;
  background:rgba(0,0,0,0.03);
  color:var(--text-primary);
  transition:border var(--transition-fast), box-shadow var(--transition-fast), background var(--transition-fast);
}

.field textarea{
  resize:vertical;
  min-height:140px;
  max-height:360px;
  line-height:1.55;
}

.field input:focus,
.field textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(106,184,255,0.22);
  outline:none;
  background:rgba(0,0,0,0.02);
}

/* Utilities */
.visually-hidden{
  position:absolute!important;
  height:1px;width:1px;
  overflow:hidden;
  clip:rect(1px,1px,1px,1px);
  white-space:nowrap;
}

/* Responsive */
@media (max-width:640px){
  body{padding:24px 14px}
  .container{padding:26px 18px;border-radius:18px}
  .brand{font-size:1.6rem}
  .topbar__spacer{width:28px;height:28px}
  .subtitle{font-size:0.92rem}
  .note-item{grid-template-columns:1fr;gap:12px;padding:16px}
  .note-actions{justify-content:flex-end}
  .modal__content{padding:22px}
  .modal__actions{flex-direction:column-reverse}
  .modal__actions .pill{width:100%}
}

@media (max-width:420px){
  #authForm{flex-direction:column}
  #emailInput{min-width:auto;width:100%}
  .new-note{justify-content:center}
}

/* Button Loading Spinner */
.button-spinner {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1rem;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from { transform: translate(-50%, -50%) rotate(0deg); }
  to { transform: translate(-50%, -50%) rotate(360deg); }
}